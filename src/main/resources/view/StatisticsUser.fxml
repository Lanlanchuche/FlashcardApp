<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.mycompany.flashcardapp.controller.StatisticsUserController"
            style="-fx-background-color: #F0EDF6;">

   <!-- Header -->
   <AnchorPane prefHeight="65.0"
               style="-fx-background-color: #8E62A6;"
               AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
      <children>
         <Button fx:id="btnBack" layoutX="15.0" layoutY="15.0"
                 mnemonicParsing="false"
                 style="-fx-background-color: transparent; -fx-cursor: hand;"
                 text="&#8592;" textFill="WHITE" onAction="#handleBack">
            <font><Font name="System Bold" size="20.0" /></font>
         </Button>
         <Label layoutX="55.0" layoutY="16.0" text="Thá»‘ng KÃª Cá»§a TÃ´i" textFill="WHITE">
            <font><Font name="System Bold" size="22.0" /></font>
         </Label>
      </children>
   </AnchorPane>

   <!-- Scrollable content - cÄƒn giá»¯a theo chiá»u ngang -->
   <ScrollPane fitToWidth="true" hbarPolicy="NEVER"
               style="-fx-background-color: transparent; -fx-background: transparent;"
               AnchorPane.topAnchor="65.0" AnchorPane.bottomAnchor="0.0"
               AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0">
      <content>
         <!-- Wrapper cÄƒn giá»¯a -->
         <HBox alignment="TOP_CENTER" style="-fx-background-color: #F0EDF6;">
            <padding><Insets top="24.0" bottom="32.0" left="0.0" right="0.0" /></padding>
            <children>

               <!-- Cá»™t ná»™i dung width cá»‘ Ä‘á»‹nh nhÆ° Ä‘iá»‡n thoáº¡i -->
               <VBox spacing="16.0" prefWidth="460.0" maxWidth="460.0">
                  <children>

                     <!-- ===== SECTION 1: THá»NG KÃŠ Há»ŒC Táº¬P ===== -->
                     <VBox spacing="10.0"
                           style="-fx-background-color: white; -fx-background-radius: 16;
                                  -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.09), 12, 0, 0, 3);">
                        <padding><Insets top="16.0" bottom="16.0" left="16.0" right="16.0" /></padding>
                        <children>

                           <!-- TiÃªu Ä‘á» -->
                           <HBox spacing="6.0" alignment="CENTER_LEFT">
                              <children>
                                 <Label text="ðŸ“Š" style="-fx-font-size: 15;" />
                                 <Label text="Thá»‘ng KÃª Há»c Táº­p" style="-fx-text-fill: #8E62A6;">
                                    <font><Font name="System Bold" size="15.0" /></font>
                                 </Label>
                              </children>
                           </HBox>

                           <!-- 4 tháº» dá»c -->
                           <VBox spacing="8.0">
                              <children>
                                 <!-- Tá»•ng sá»‘ tá»« -->
                                 <HBox alignment="CENTER_LEFT" spacing="14.0"
                                       style="-fx-background-color: #EDE7F6; -fx-background-radius: 10;">
                                    <padding><Insets top="12.0" bottom="12.0" left="16.0" right="16.0" /></padding>
                                    <children>
                                       <Label text="ðŸ“" style="-fx-font-size: 22;" />
                                       <VBox spacing="1.0">
                                          <children>
                                             <Label fx:id="lblTotalWords" text="0"
                                                    style="-fx-text-fill: #5E35B1;">
                                                <font><Font name="System Bold" size="22.0" /></font>
                                             </Label>
                                             <Label text="Tá»•ng tá»« vá»±ng"
                                                    style="-fx-text-fill: #7B6B8D; -fx-font-size: 11;" />
                                          </children>
                                       </VBox>
                                    </children>
                                 </HBox>
                                 <!-- ÄÃ£ há»c -->
                                 <HBox alignment="CENTER_LEFT" spacing="14.0"
                                       style="-fx-background-color: #E8F5E9; -fx-background-radius: 10;">
                                    <padding><Insets top="12.0" bottom="12.0" left="16.0" right="16.0" /></padding>
                                    <children>
                                       <Label text="âœ…" style="-fx-font-size: 22;" />
                                       <VBox spacing="1.0">
                                          <children>
                                             <Label fx:id="lblLearnedWords" text="0"
                                                    style="-fx-text-fill: #2E7D32;">
                                                <font><Font name="System Bold" size="22.0" /></font>
                                             </Label>
                                             <Label text="Tá»« Ä‘Ã£ há»c"
                                                    style="-fx-text-fill: #4CAF50; -fx-font-size: 11;" />
                                          </children>
                                       </VBox>
                                    </children>
                                 </HBox>
                                 <!-- Chá»§ Ä‘á» -->
                                 <HBox alignment="CENTER_LEFT" spacing="14.0"
                                       style="-fx-background-color: #FFF3E0; -fx-background-radius: 10;">
                                    <padding><Insets top="12.0" bottom="12.0" left="16.0" right="16.0" /></padding>
                                    <children>
                                       <Label text="ðŸ“š" style="-fx-font-size: 22;" />
                                       <VBox spacing="1.0">
                                          <children>
                                             <Label fx:id="lblTotalTopics" text="0"
                                                    style="-fx-text-fill: #E65100;">
                                                <font><Font name="System Bold" size="22.0" /></font>
                                             </Label>
                                             <Label text="Chá»§ Ä‘á»"
                                                    style="-fx-text-fill: #FF9800; -fx-font-size: 11;" />
                                          </children>
                                       </VBox>
                                    </children>
                                 </HBox>
                                 <!-- Äiá»ƒm TB -->
                                 <HBox alignment="CENTER_LEFT" spacing="14.0"
                                       style="-fx-background-color: #E3F2FD; -fx-background-radius: 10;">
                                    <padding><Insets top="12.0" bottom="12.0" left="16.0" right="16.0" /></padding>
                                    <children>
                                       <Label text="ðŸ…" style="-fx-font-size: 22;" />
                                       <VBox spacing="1.0">
                                          <children>
                                             <Label fx:id="lblAvgScore" text="--"
                                                    style="-fx-text-fill: #1565C0;">
                                                <font><Font name="System Bold" size="22.0" /></font>
                                             </Label>
                                             <Label text="Äiá»ƒm trung bÃ¬nh"
                                                    style="-fx-text-fill: #1E88E5; -fx-font-size: 11;" />
                                          </children>
                                       </VBox>
                                    </children>
                                 </HBox>
                              </children>
                           </VBox>

                        </children>
                     </VBox>

                     <!-- ===== SECTION 2: Lá»ŠCH Sá»¬ BÃ€I KIá»‚M TRA ===== -->
                     <VBox spacing="10.0"
                           style="-fx-background-color: white; -fx-background-radius: 16;
                                  -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.09), 12, 0, 0, 3);">
                        <padding><Insets top="16.0" bottom="16.0" left="16.0" right="16.0" /></padding>
                        <children>

                           <!-- TiÃªu Ä‘á» -->
                           <HBox spacing="6.0" alignment="CENTER_LEFT">
                              <children>
                                 <Label text="ðŸ“‹" style="-fx-font-size: 15;" />
                                 <Label text="Lá»‹ch Sá»­ BÃ i Kiá»ƒm Tra" style="-fx-text-fill: #1565C0;">
                                    <font><Font name="System Bold" size="15.0" /></font>
                                 </Label>
                              </children>
                           </HBox>

                           <!-- Header row -->
                           <HBox style="-fx-background-color: #E3F2FD; -fx-background-radius: 7;">
                              <padding><Insets top="7.0" bottom="7.0" left="10.0" right="10.0" /></padding>
                              <children>
                                 <Label text="Loáº¡i bÃ i" prefWidth="155.0"
                                        style="-fx-text-fill: black; -fx-font-size: 11;">
                                    <font><Font name="System Bold" size="11.0" /></font>
                                 </Label>
                                 <Label text="Äiá»ƒm" prefWidth="85.0"
                                        style="-fx-text-fill: black; -fx-font-size: 11;">
                                    <font><Font name="System Bold" size="11.0" /></font>
                                 </Label>
                                 <Label text="Tá»‰ lá»‡" prefWidth="65.0"
                                        style="-fx-text-fill: black; -fx-font-size: 11;">
                                    <font><Font name="System Bold" size="11.0" /></font>
                                 </Label>
                                 <Label text="Thá»i gian"
                                        style="-fx-text-fill: black; -fx-font-size: 11;">
                                    <font><Font name="System Bold" size="11.0" /></font>
                                 </Label>
                              </children>
                           </HBox>

                           <!-- Danh sÃ¡ch cuá»™n -->
                           <ScrollPane fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED"
                                       prefHeight="260.0"
                                       style="-fx-background-color: transparent; -fx-background: transparent;
                                              -fx-border-color: transparent;">
                              <content>
                                 <VBox fx:id="testResultsContainer" spacing="3.0" style="-fx-text-fill: black;">
                                    <padding><Insets top="2.0" bottom="2.0" /></padding>
                                    <Label fx:id="lblNoResults" text="ChÆ°a cÃ³ bÃ i kiá»ƒm tra nÃ o."
                                           style="-fx-text-fill: #9E9E9E; -fx-font-size: 13; -fx-padding: 14 0 0 4;" />
                                 </VBox>
                              </content>
                           </ScrollPane>

                        </children>
                     </VBox>

                     <!-- ===== SECTION 3: STREAK ===== -->
                     <VBox spacing="10.0"
                           style="-fx-background-color: white; -fx-background-radius: 16;
                                  -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.09), 12, 0, 0, 3);">
                        <padding><Insets top="16.0" bottom="16.0" left="16.0" right="16.0" /></padding>
                        <children>

                           <!-- TiÃªu Ä‘á» -->
                           <HBox spacing="6.0" alignment="CENTER_LEFT">
                              <children>
                                 <Label text="ðŸ”¥" style="-fx-font-size: 15;" />
                                 <Label text="Streak Há»c Táº­p" style="-fx-text-fill: #E64A19;">
                                    <font><Font name="System Bold" size="15.0" /></font>
                                 </Label>
                              </children>
                           </HBox>

                           <!-- Streak hiá»‡n táº¡i -->
                           <VBox alignment="CENTER" spacing="3.0"
                                 style="-fx-background-color: linear-gradient(to bottom right, #FF7043, #FF8F00);
                                        -fx-background-radius: 12;">
                              <padding><Insets top="20.0" bottom="20.0" left="10.0" right="10.0" /></padding>
                              <children>
                                 <Label text="ðŸ”¥" style="-fx-font-size: 32;" />
                                 <Label fx:id="lblCurrentStreak" text="0"
                                        style="-fx-text-fill: white;">
                                    <font><Font name="System Bold" size="42.0" /></font>
                                 </Label>
                                 <Label text="Streak hiá»‡n táº¡i (ngÃ y)"
                                        style="-fx-text-fill: rgba(255,255,255,0.9); -fx-font-size: 13;" />
                              </children>
                           </VBox>

                           <!-- Streak dÃ i nháº¥t + Freeze -->
                           <HBox spacing="8.0">
                              <children>
                                 <VBox alignment="CENTER" prefHeight="80.0" spacing="3.0"
                                       style="-fx-background-color: #FCE4EC; -fx-background-radius: 10;"
                                       HBox.hgrow="ALWAYS">
                                    <padding><Insets top="12.0" bottom="12.0" left="6.0" right="6.0" /></padding>
                                    <children>
                                       <Label text="ðŸ†" style="-fx-font-size: 20;" />
                                       <Label fx:id="lblLongestStreak" text="0"
                                              style="-fx-text-fill: #C62828;">
                                          <font><Font name="System Bold" size="24.0" /></font>
                                       </Label>
                                       <Label text="Streak dÃ i nháº¥t"
                                              style="-fx-text-fill: #E57373; -fx-font-size: 11;" />
                                    </children>
                                 </VBox>
                                 <VBox alignment="CENTER" prefHeight="80.0" spacing="3.0"
                                       style="-fx-background-color: #E0F7FA; -fx-background-radius: 10;"
                                       HBox.hgrow="ALWAYS">
                                    <padding><Insets top="12.0" bottom="12.0" left="6.0" right="6.0" /></padding>
                                    <children>
                                       <Label text="ðŸ§Š" style="-fx-font-size: 20;" />
                                       <Label fx:id="lblFreezeCount" text="0"
                                              style="-fx-text-fill: #00838F;">
                                          <font><Font name="System Bold" size="24.0" /></font>
                                       </Label>
                                       <Label text="Freeze cÃ²n láº¡i"
                                              style="-fx-text-fill: #00ACC1; -fx-font-size: 11;" />
                                    </children>
                                 </VBox>
                              </children>
                           </HBox>

                        </children>
                     </VBox>

                  </children>
               </VBox>

            </children>
         </HBox>
      </content>
   </ScrollPane>

</AnchorPane>
