<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<?import javafx.scene.layout.StackPane?>
<?import javafx.geometry.Insets?>
<BorderPane prefHeight="400.0" prefWidth="600.0" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.mycompany.flashcardapp.controller.MainMenuController">
    <top>
        <HBox alignment="CENTER_LEFT" spacing="20" style="-fx-background-color: #2c3e50; -fx-padding: 15;">
            <children>
                <Button onAction="#backToMainMenu" text="â† Quay láº¡i" styleClass="secondary-button" />
                <Region HBox.hgrow="ALWAYS" />
                <Label text="Há»c táº­p" textFill="WHITE" style="-fx-font-weight: bold; -fx-font-size: 20;" />
                <Region HBox.hgrow="ALWAYS" />
                <Button fx:id="logoutButton" onAction="#handleLogout" styleClass="logout-button" text="ÄÄƒng xuáº¥t" />
            </children>
        </HBox>
    </top>

    <center>
        <StackPane>
            <children>
                <!-- Main content -->
                <VBox alignment="CENTER" spacing="25" style="-fx-padding: 30;">
                    <children>
                        <!-- Streak display at top -->
                        <HBox alignment="CENTER" spacing="30">
                            <children>
                                <Label fx:id="streakLabel"
                                       text="ðŸ”¥ Streak: 0 ngÃ y"
                                       style="-fx-font-size: 18; -fx-font-weight: bold; -fx-text-fill: #e74c3c;" />
                                <Label fx:id="longestStreakLabel"
                                       text="ðŸ† Ká»· lá»¥c: 0 ngÃ y"
                                       style="-fx-font-size: 16; -fx-text-fill: #f39c12;" />
                            </children>
                        </HBox>

                        <Label text="CHáº M VÃ€O THáºº Äá»‚ Láº¬T"
                               style="-fx-font-size: 18; -fx-text-fill: #7f8c8d; -fx-font-weight: 600;" />

                        <!-- Flashcard - Square shape 400x400 -->
                        <StackPane fx:id="flashcardPane"
                                   onMouseClicked="#handleFlipCard"
                                   prefHeight="400.0"
                                   prefWidth="400.0"
                                   minHeight="400.0"
                                   minWidth="400.0"
                                   maxHeight="400.0"
                                   maxWidth="400.0"
                                   style="-fx-background-color: white;
                                          -fx-background-radius: 20;
                                          -fx-cursor: hand;
                                          -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.25), 15, 0, 0, 5);
                                          -fx-border-color: #e0e0e0;
                                          -fx-border-width: 1;
                                          -fx-border-radius: 20;">
                            <children>
                                <!-- Front Card -->
                                <VBox fx:id="frontCard" alignment="CENTER" spacing="15" style="-fx-padding: 20;">
                                    <children>
                                        <Label text="Máº¶T TRÆ¯á»šC"
                                               style="-fx-text-fill: #95a5a6; -fx-font-size: 11; -fx-font-weight: 600;" />
                                        <Region VBox.vgrow="ALWAYS" />
                                        <Label fx:id="reviewVocabLabel"
                                               text="Word"
                                               textAlignment="CENTER"
                                               wrapText="true"
                                               maxWidth="360"
                                               style="-fx-font-size: 40; -fx-font-weight: bold; -fx-text-fill: #2980b9;" />
                                        <Region VBox.vgrow="ALWAYS" />
                                    </children>
                                </VBox>

                                <!-- Back Card -->
                                <VBox fx:id="backCard" alignment="CENTER" spacing="15" visible="false" style="-fx-padding: 20;">
                                    <children>
                                        <Label text="Máº¶T SAU"
                                               style="-fx-text-fill: #95a5a6; -fx-font-size: 11; -fx-font-weight: 600;" />
                                        <Region VBox.vgrow="ALWAYS" />
                                        <Label fx:id="reviewDefLabel"
                                               text="Definition"
                                               textAlignment="CENTER"
                                               wrapText="true"
                                               maxWidth="360"
                                               style="-fx-font-size: 32; -fx-font-weight: 600; -fx-text-fill: #27ae60;" />
                                        <Region VBox.vgrow="ALWAYS" />
                                    </children>
                                </VBox>
                            </children>
                        </StackPane>

                        <!-- Action Buttons -->
                        <HBox alignment="CENTER" spacing="15">
                            <children>
                                <Button onAction="#handleRestartStudy"
                                        styleClass="warning-button"
                                        text="ðŸ”„ Há»c láº¡i"
                                        style="-fx-font-size: 14;" />
                                <Button onAction="#handleMarkLearnedInStudy"
                                        styleClass="success-button"
                                        text="âœ” ÄÃ£ thuá»™c"
                                        style="-fx-font-size: 14;" />
                                <Button onAction="#handleNextCard"
                                        styleClass="secondary-button"
                                        text="Tiáº¿p theo âž”"
                                        style="-fx-font-size: 14;" />
                            </children>
                        </HBox>
                    </children>
                </VBox>

                <!-- Timer overlay - small, compact, positioned at top right corner -->
                <VBox alignment="TOP_RIGHT" StackPane.alignment="TOP_RIGHT">
                    <children>
                        <VBox alignment="CENTER_RIGHT" spacing="3"
                              style="-fx-background-color: rgba(44, 62, 80, 0.90);
                                     -fx-padding: 8 12;
                                     -fx-background-radius: 8;
                                     -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.25), 6, 0, 0, 2);">
                            <children>
                                <Label fx:id="timerDisplayLabel"
                                       text="05:00"
                                       style="-fx-font-size: 20;
                                              -fx-font-weight: bold;
                                              -fx-text-fill: #e74c3c;
                                              -fx-font-family: 'Courier New', monospace;" />
                                <Label text="â± 5 phÃºt"
                                       style="-fx-font-size: 9;
                                              -fx-text-fill: white;
                                              -fx-opacity: 0.85;" />
                            </children>
                        </VBox>
                    </children>
                    <padding>
                        <Insets top="10" right="10" />
                    </padding>
                </VBox>
            </children>
        </StackPane>
    </center>
</BorderPane>
